{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode } from \"vue\";\nimport _imports_0 from '../assets/icons/comments.svg';\nconst _hoisted_1 = {\n  class: \"posts\"\n};\nconst _hoisted_2 = [\"src\"];\nconst _hoisted_3 = {\n  class: \"w-full h-full\"\n};\nconst _hoisted_4 = {\n  class: \"flex gap-3 mb-2\"\n};\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"p\", null, \". 5h\", -1 /* HOISTED */);\nconst _hoisted_6 = {\n  class: \"w-[70%] mb-4\"\n};\nconst _hoisted_7 = [\"src\"];\nconst _hoisted_8 = {\n  class: \"w-[40%] post-icns flex justify-between p-5\"\n};\nconst _hoisted_9 = [\"onClick\"];\nconst _hoisted_10 = [\"src\"];\nconst _hoisted_11 = /*#__PURE__*/_createElementVNode(\"img\", {\n  src: _imports_0,\n  alt: \"\"\n}, null, -1 /* HOISTED */);\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createCommentVNode(\" Posts \"), _createElementVNode(\"ul\", _hoisted_1, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.posts, post => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: post.id,\n      class: \"flex gap-3\"\n    }, [post.user.avatar_url ? (_openBlock(), _createElementBlock(\"img\", {\n      key: 0,\n      class: \"w-14 h-14 rounded-full ml-3\",\n      src: require(`@/${post.user.avatar_url}`),\n      alt: \"User Avatar\"\n    }, null, 8 /* PROPS */, _hoisted_2)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"p\", null, _toDisplayString(post.user ? post.user.name : \"Unknown User\"), 1 /* TEXT */), _createElementVNode(\"p\", null, \"@\" + _toDisplayString(post.user ? post.user.user_name : \"unknown\"), 1 /* TEXT */), _hoisted_5]), _createElementVNode(\"p\", _hoisted_6, _toDisplayString(post.content), 1 /* TEXT */), post.image_url ? (_openBlock(), _createElementBlock(\"img\", {\n      key: 0,\n      src: require(`@/${post.image_url}`),\n      alt: \"Post Image\",\n      class: \"w-[70%] rounded-3xl border border-[lightgray]\"\n    }, null, 8 /* PROPS */, _hoisted_7)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"p\", {\n      onClick: $event => $setup.toggleLike(post)\n    }, [_createElementVNode(\"img\", {\n      src: post.liked ? require('../assets/icons/heartLiked.svg') : require('../assets/icons/heart.svg'),\n      alt: \"Heart Icon\"\n    }, null, 8 /* PROPS */, _hoisted_10), _createTextVNode(\" \" + _toDisplayString($setup.formatNumber(post.likes_count)), 1 /* TEXT */)], 8 /* PROPS */, _hoisted_9), _createElementVNode(\"p\", null, [_hoisted_11, _createTextVNode(\" \" + _toDisplayString($setup.formatNumber(post.comments_count)), 1 /* TEXT */)])])])]);\n  }), 128 /* KEYED_FRAGMENT */))])], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */);\n}","map":{"version":3,"names":["_imports_0","class","_createElementVNode","src","alt","_createElementBlock","_Fragment","_createCommentVNode","_hoisted_1","_renderList","$setup","posts","post","key","id","user","avatar_url","require","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","name","user_name","_hoisted_5","_hoisted_6","content","image_url","_hoisted_7","_hoisted_8","onClick","$event","toggleLike","liked","_hoisted_10","_createTextVNode","formatNumber","likes_count","_hoisted_9","_hoisted_11","comments_count"],"sources":["/Users/badrnejaa/Desktop/Tweety/src/components/Posts.vue"],"sourcesContent":["<template>\n  <!-- Posts -->\n  <ul class=\"posts\">\n    <li v-for=\"post in posts\" :key=\"post.id\" class=\"flex gap-3\">\n      <img\n        v-if=\"post.user.avatar_url\"\n        class=\"w-14 h-14 rounded-full ml-3\"\n        :src=\"require(`@/${post.user.avatar_url}`)\"\n        alt=\"User Avatar\"\n      />\n\n      <div class=\"w-full h-full\">\n        <div class=\"flex gap-3 mb-2\">\n          <p>{{ post.user ? post.user.name : \"Unknown User\" }}</p>\n          <p>@{{ post.user ? post.user.user_name : \"unknown\" }}</p>\n          <p>. 5h</p>\n        </div>\n\n        <p class=\"w-[70%] mb-4\">\n          {{ post.content }}\n        </p>\n        <img\n          v-if=\"post.image_url\"\n          :src=\"require(`@/${post.image_url}`)\"\n          alt=\"Post Image\"\n          class=\"w-[70%] rounded-3xl border border-[lightgray]\"\n        />\n        <div class=\"w-[40%] post-icns flex justify-between p-5\">\n          <p @click=\"toggleLike(post)\">\n            <img\n              :src=\"\n                post.liked\n                  ? require('../assets/icons/heartLiked.svg')\n                  : require('../assets/icons/heart.svg')\n              \"\n              alt=\"Heart Icon\"\n            />\n            {{ formatNumber(post.likes_count) }}\n          </p>\n          <p>\n            <img src=\"../assets/icons/comments.svg\" alt=\"\" />\n            {{ formatNumber(post.comments_count) }}\n          </p>\n        </div>\n      </div>\n    </li>\n  </ul>\n</template>\n\n<style>\nbody {\n  color: antiquewhite;\n}\n\n.post-icns p {\n  display: flex;\n  gap: 8px;\n  cursor: pointer;\n}\n\n.posts li {\n  padding-top: 12px;\n  border-bottom: 1px solid lightgray;\n}\n</style>\n\n<script>\nimport { ref, onMounted } from \"vue\";\nimport axios from \"axios\";\n\nexport default {\n  name: \"PostsContainer\",\n  setup() {\n    const posts = ref([]);\n\n    async function fetchPosts() {\n      try {\n        const [postsResponse, usersResponse] = await Promise.all([\n          axios.get(\"http://localhost:3000/Posts\"),\n          axios.get(\"http://localhost:3000/Users\"),\n        ]);\n\n        const usersMap = usersResponse.data.reduce((acc, user) => {\n          acc[user.id] = user;\n          return acc;\n        }, {});\n\n        posts.value = postsResponse.data.map((post) => ({\n          ...post,\n          user: usersMap[post.user_id],\n        }));\n      } catch (error) {\n        console.error(\"Error fetching posts:\", error);\n      }\n    }\n\n    async function toggleLike(post) {\n      try {\n        const updatedPost = {\n          ...post,\n          liked: !post.liked,\n          likes_count: post.liked ? post.likes_count - 1 : post.likes_count + 1,\n        };\n\n        await axios.put(`http://localhost:3000/Posts/${post.id}`, updatedPost);\n\n        const index = posts.value.findIndex((p) => p.id === post.id);\n        if (index !== -1) {\n          posts.value[index] = { ...updatedPost, user: post.user };\n        }\n      } catch (error) {\n        console.error(\"Error toggling like:\", error);\n      }\n    }\n\n    function formatNumber(number) {\n      if (number >= 1000000000) {\n        return (number / 1000000000).toFixed(1) + \"B\";\n      } else if (number >= 1000000) {\n        return (number / 1000000).toFixed(1) + \"M\";\n      } else if (number >= 1000) {\n        return (number / 1000).toFixed(1) + \"K\";\n      }\n      return number;\n    }\n\n    onMounted(fetchPosts);\n\n    return {\n      posts,\n      formatNumber,\n      toggleLike,\n    };\n  },\n};\n</script>\n"],"mappings":";OAwCiBA,UAAkC;;EAtC7CC,KAAK,EAAC;AAAO;mBAFnB;;EAWWA,KAAK,EAAC;AAAe;;EACnBA,KAAK,EAAC;AAAiB;gCAG1BC,mBAAA,CAAW,WAAR,MAAI;;EAGND,KAAK,EAAC;AAAc;mBAlB/B;;EA2BaA,KAAK,EAAC;AAA4C;mBA3B/D;oBAAA;iCAwCYC,mBAAA,CAAiD;EAA5CC,GAAkC,EAAlCH,UAAkC;EAACI,GAAG,EAAC;;;uBAxCxDC,mBAAA,CAAAC,SAAA,SACEC,mBAAA,WAAc,EACdL,mBAAA,CA4CK,MA5CLM,UA4CK,I,kBA3CHH,mBAAA,CA0CKC,SAAA,QA7CTG,WAAA,CAGuBC,MAAA,CAAAC,KAAK,EAAbC,IAAI;yBAAfP,mBAAA,CA0CK;MA1CsBQ,GAAG,EAAED,IAAI,CAACE,EAAE;MAAEb,KAAK,EAAC;QAErCW,IAAI,CAACG,IAAI,CAACC,UAAU,I,cAD5BX,mBAAA,CAKE;MATRQ,GAAA;MAMQZ,KAAK,EAAC,6BAA6B;MAClCE,GAAG,EAAEc,OAAO,MAAML,IAAI,CAACG,IAAI,CAACC,UAAU;MACvCZ,GAAG,EAAC;4BARZc,UAAA,KAAAX,mBAAA,gBAWML,mBAAA,CAiCM,OAjCNiB,UAiCM,GAhCJjB,mBAAA,CAIM,OAJNkB,UAIM,GAHJlB,mBAAA,CAAwD,WAAAmB,gBAAA,CAAlDT,IAAI,CAACG,IAAI,GAAGH,IAAI,CAACG,IAAI,CAACO,IAAI,mCAChCpB,mBAAA,CAAyD,WAAtD,GAAC,GAAAmB,gBAAA,CAAGT,IAAI,CAACG,IAAI,GAAGH,IAAI,CAACG,IAAI,CAACQ,SAAS,8BACtCC,UAAW,C,GAGbtB,mBAAA,CAEI,KAFJuB,UAEI,EAAAJ,gBAAA,CADCT,IAAI,CAACc,OAAO,kBAGTd,IAAI,CAACe,SAAS,I,cADtBtB,mBAAA,CAKE;MA1BVQ,GAAA;MAuBWV,GAAG,EAAEc,OAAO,MAAML,IAAI,CAACe,SAAS;MACjCvB,GAAG,EAAC,YAAY;MAChBH,KAAK,EAAC;4BAzBhB2B,UAAA,KAAArB,mBAAA,gBA2BQL,mBAAA,CAgBM,OAhBN2B,UAgBM,GAfJ3B,mBAAA,CAUI;MAVA4B,OAAK,EAAAC,MAAA,IAAErB,MAAA,CAAAsB,UAAU,CAACpB,IAAI;QACxBV,mBAAA,CAOE;MANCC,GAAG,EAAmBS,IAAI,CAACqB,KAAK,GAAqBhB,OAAO,qCAAuDA,OAAO;MAK3Hb,GAAG,EAAC;4BAnClB8B,WAAA,GAAAC,gBAAA,CAoCc,GACF,GAAAd,gBAAA,CAAGX,MAAA,CAAA0B,YAAY,CAACxB,IAAI,CAACyB,WAAW,kB,iBArC5CC,UAAA,GAuCUpC,mBAAA,CAGI,YAFFqC,WAAiD,EAxC7DJ,gBAAA,CAwC6D,GACjD,GAAAd,gBAAA,CAAGX,MAAA,CAAA0B,YAAY,CAACxB,IAAI,CAAC4B,cAAc,kB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}